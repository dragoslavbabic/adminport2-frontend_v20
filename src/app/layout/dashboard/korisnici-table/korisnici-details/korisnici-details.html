@if (user) {
  <div class="card">
    <div class="card-header my-card-header">
      <div class="user-header">
        <div class="user-avatar">
          {{ user.fullName! | initials }} <!-- Pipe za inicijale ili prvi karakteri -->
        </div>
        <div class="user-info">
          <div class="user-name">{{ user.fullName }}</div>
          <div class="user-username">{{ user.username }}</div>
          <div class="user-status">
        <span [ngClass]="{
  'status-bad': ((user.activeTo ?? '') | badgeColor) === 'badge-border-red',
  'status-good': ((user.activeTo ?? '') | badgeColor) === 'badge-border-green'
        }">
        {{ user.activeTo | accountStatus }}
        </span>
          </div>
        </div>
        <div class="user-actions">
          <button mat-icon-button matTooltip="Resetuj lozinku">
            <mat-icon>restart_alt</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Blokiraj/odblokiraj">
            <mat-icon>block</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Obriši korisnika">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
    <div class="card-header">
      <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="ldap-tab" data-bs-toggle="tab"
                  data-bs-target="#ldap" type="button" role="tab" aria-controls="ldap" aria-selected="true">
            LDAP podaci
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="logs-tab" data-bs-toggle="tab"
                  data-bs-target="#logs" type="button" role="tab" aria-controls="logs" aria-selected="false">
            Logovi
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="postgres-tab" data-bs-toggle="tab"
                  data-bs-target="#postgres" type="button" role="tab" aria-controls="postgres" aria-selected="false">
            Postgres
          </button>
        </li>
        <!-- Dodaj još kartica po potrebi -->
      </ul>
  </div>
    <!-- Sadržaj kartica -->
    <div class="card-body tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="ldap" role="tabpanel" aria-labelledby="ldap-tab">
        <ldap-card
          [user]="user.ldap"
          [institution]="user.postgres?.rawPgInstitucija || undefined"></ldap-card>
      </div>

      <div class="tab-pane fade" id="logs" role="tabpanel" aria-labelledby="logs-tab">
        <log-card
          [user]="user.username">
        </log-card>

      </div>
      <div class="tab-pane fade" id="postgres" role="tabpanel" aria-labelledby="postgres-tab">
        <postgres-card [baseUser]="user"
                       [viewContainerRef]="viewContainerRef"
                       [pgUser]="pgUser()"
                       [fullname]="user.ldap?.ldapFullName"
                       [lastname]="user.ldap?.ldapLastName"
                       [username]="user.ldap?.ldapUsername"
                       [institucije]="institucije()"
                       [statusi]="statusi()"
                       (userSaved)="onUserSaved($event)">
          >

        </postgres-card>
      </div>
    </div>
  </div>
  <!--  <div class="user-header">
    <div class="user-avatar">
      {{ user.fullName! | initials }} &lt;!&ndash; Pipe za inicijale ili prvi karakteri &ndash;&gt;
    </div>
    <div class="user-info">
      <div class="user-name">{{ user.fullName }}</div>
      <div class="user-username">{{ user.username }}</div>
      <div class="user-status">
        <span [ngClass]="{
  'status-bad': ((user.activeTo ?? '') | badgeColor) === 'badge-border-red',
  'status-good': ((user.activeTo ?? '') | badgeColor) === 'badge-border-green'
        }">
        {{ user.activeTo | accountStatus }}
        </span>
      </div>
    </div>
    <div class="user-actions">
      <button mat-icon-button matTooltip="Resetuj lozinku">
        <mat-icon>restart_alt</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Blokiraj/odblokiraj">
        <mat-icon>block</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Obriši korisnika">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>-->

  <!--<mat-tab-group>
    <mat-tab label="LDAP podaci">
      <ldap-card
        [user]="user.ldap"
        [institution]="user.postgres?.rawPgInstitucija || undefined"></ldap-card>
    </mat-tab>
    <mat-tab label="Logovi">
      <log-card [user]="user"></log-card>
    </mat-tab>
    <mat-tab label="Postgres">
      <postgres-card [baseUser]="user"
                     [viewContainerRef]="viewContainerRef"
                     [pgUser]="pgUser()"
                     [fullname]="user.ldap?.ldapFullName"
                     [lastname]="user.ldap?.ldapLastName"
                     [username]="user.ldap?.ldapUsername"
                     [institucije]="institucije()"
                     [statusi]="statusi()"
                    (userSaved)="onUserSaved($event)">
      >

      </postgres-card>
    </mat-tab>
  </mat-tab-group>-->
}

@else {
  <div style="padding: 32px; text-align: center; color: #666;">
    Izaberi korisnika za detalje.
  </div>
}
